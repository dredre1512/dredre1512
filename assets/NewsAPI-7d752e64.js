import{r as l,c as y,o as b,a,b as n,d as T,e as m,f as e,w as k,v as x,u as A,F as p,g as E,t as h}from"./index-83c44d14.js";import{a as P}from"./axios-aba6f0e0.js";import{T as S,c as C}from"./Toast-fbb3c6f9.js";const M={class:"bg-gray card p-5"},N=e("h1",null,"News API",-1),q={class:"mx-auto"},I={class:"mb-3"},L=e("label",{for:"q",class:"form-label"},"Search",-1),B={key:0},H=e("div",{class:"text-center card p-3"},[e("span",null,[e("i",null,"Loading...")])],-1),D=[H],V={key:1,class:"text-center text-muted card p-3"},F=e("span",null,"No news found.",-1),K=[F],O={key:2,class:"row"},U={class:"card"},W=["src"],$={class:"card-body"},z={class:"card-title"},G={class:"text-muted"},X=["innerHTML"],Y=["href"],Z={__name:"NewsAPI",setup(j){const v={headers:{"X-Api-Key":C.NEWS_API_KEY,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE","Access-Control-Allow-Headers":"Content-Type"}},u=o=>{_.value=o,d.value=!0},i=l(!1),d=l(!1),_=l("Something went wrong"),r=l({q:"",pageSize:100}),c=l([]),g=y(()=>c.value.length===0),w=async()=>{if(r.value.q==="")return await u("Please input what you want to search");c.value=[],i.value=!0;const o=await P.get("https://newsapi.org/v2/everything",{...v,params:r.value}).catch(t=>{t.response.data.code==="parametersMissing"&&u("Please input what you want to search")});o&&o.data&&o.data.status=="ok"&&(c.value=o.data.articles),i.value=!1};return b(()=>{}),(o,t)=>(a(),n(p,null,[d.value?(a(),T(S,{key:0,message:_.value,onHide:t[0]||(t[0]=s=>d.value=!1)},null,8,["message"])):m("",!0),e("main",M,[N,e("section",null,[e("div",q,[e("div",I,[L,k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.q=s),type:"email",class:"form-control",id:"q",placeholder:"What's on your mind?"},null,512),[[x,r.value.q]])])]),e("button",{onClick:t[2]||(t[2]=s=>w()),class:"btn btn-primary mb-3"},"Search"),i.value?(a(),n("div",B,D)):A(g)?(a(),n("div",V,K)):(a(),n("div",O,[(a(!0),n(p,null,E(c.value,(s,f)=>(a(),n("div",{key:"news-"+f,class:"col-md-6 col-lg-4 col-12 mb-4"},[e("div",U,[s.urlToImage?(a(),n("img",{key:0,src:s.urlToImage,class:"card-img-top",alt:"..."},null,8,W)):m("",!0),e("div",$,[e("h5",z,h(s.title),1),e("i",G,h(s.author),1),e("p",{class:"card-text",innerHTML:s.description},null,8,X),e("a",{href:s.url,class:"btn btn-primary"},"Show more",8,Y)])])]))),128))]))])])],64))}};export{Z as default};
